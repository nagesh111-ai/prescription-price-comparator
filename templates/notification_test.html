{% extends 'base.html' %}

{% block title %}Test Notifications | Medicine Reminder App{% endblock %}

{% block content %}
<div class="container py-4 test-notification-page">
    <div class="row">
        <div class="col-12">
            <h1 class="page-title mb-3">Notification Testing Center</h1>
            <p class="page-description mb-4">Test browser notifications and sound alerts for your medicine reminders.</p>
        </div>
    </div>

    <div class="row mb-4">
        <div class="col-md-6 mb-4">
            <div class="card">
                <div class="card-header">
                    <h2 class="h5 mb-0">Browser Notifications</h2>
                </div>
                <div class="card-body">
                    <div class="mb-3">
                        <p>Current permission status: <span id="notification-permission" class="badge bg-secondary">Checking...</span></p>
                    </div>
                    <div class="mb-3">
                        <button id="request-permission" class="btn btn-primary me-2">Request Permission</button>
                        <button id="test-notification" class="btn btn-outline-primary" disabled>Test Notification</button>
                    </div>
                    <div id="notification-status-container" class="mb-2">
                        <p>Status: <span id="notification-status">Not tested yet</span></p>
                    </div>
                </div>
            </div>
        </div>

        <div class="col-md-6 mb-4">
            <div class="card">
                <div class="card-header">
                    <h2 class="h5 mb-0">Sound Alerts</h2>
                </div>
                <div class="card-body">
                    <div class="mb-3">
                        <p>Audio capability: <span id="sound-capability" class="badge bg-secondary">Checking...</span></p>
                    </div>
                    <div class="mb-3">
                        <button id="test-sound" class="btn btn-outline-primary" disabled>Test Sound</button>
                    </div>
                    <div id="sound-status-container" class="mb-2">
                        <p>Status: <span id="sound-status">Not tested yet</span></p>
                    </div>
                </div>
            </div>
        </div>
    </div>

    <div class="row">
        <div class="col-12">
            <div class="card">
                <div class="card-header d-flex justify-content-between align-items-center">
                    <h2 class="h5 mb-0">Debug Console</h2>
                    <button id="clear-logs" class="btn btn-sm btn-outline-secondary">Clear Logs</button>
                </div>
                <div class="card-body">
                    <div id="debug-log" class="debug-console">
                        <div class="log-entry">
                            <span class="timestamp">{{ moment().format('HH:mm:ss') }}</span>
                            <span class="log-message">Debug console initialized</span>
                        </div>
                    </div>
                </div>
            </div>
        </div>
    </div>
</div>
{% endblock %}

{% block scripts %}
<script src="{{ url_for('static', filename='js/notifications.js') }}"></script>
{% endblock %} 